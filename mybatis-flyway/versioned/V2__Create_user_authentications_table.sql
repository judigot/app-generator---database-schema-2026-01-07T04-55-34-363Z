-- Flyway migration: V2__Create_user_authentications_table.sql
-- MyBatis + Flyway migration for user_authentication
DROP TABLE IF EXISTS "user_authentication";

CREATE TABLE "user_authentication" (
  "user_id" BIGSERIAL PRIMARY KEY,
  "password" CHAR(60) NOT NULL,
  "otp_code" TEXT,
  "otp_expiry" TIMESTAMPTZ (6),
  "last_login_at" TIMESTAMPTZ (6),
  "last_logout_at" TIMESTAMPTZ (6),
  "failure_count" BIGINT NOT NULL,
  "lock_flag" BOOLEAN NOT NULL,
  "lock_at" TIMESTAMPTZ (6),
  "password_updated_at" TIMESTAMPTZ (6),
  "password_expiry_date" TIMESTAMPTZ (6),
  "password_reset_token" TEXT,
  "password_reset_expiry" TIMESTAMPTZ (6),
  "created_at" TIMESTAMPTZ (6) DEFAULT NOW () NOT NULL,
  "updated_at" TIMESTAMPTZ (6) DEFAULT NOW (),
  "deleted_at" TIMESTAMPTZ (6),
  CONSTRAINT "FK_user_authentication_user_id" FOREIGN KEY ("user_id") REFERENCES "users" ("user_id")
);

INSERT INTO
  "user_authentication" (
    user_id,
    password,
    otp_code,
    otp_expiry,
    last_login_at,
    last_logout_at,
    failure_count,
    lock_flag,
    lock_at,
    password_updated_at,
    password_expiry_date,
    password_reset_token,
    password_reset_expiry,
    created_at,
    updated_at,
    deleted_at
  )
VALUES
  (
    1,
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    NULL,
    NULL,
    NULL,
    NULL,
    7377996149909117,
    FALSE,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    '2025-08-01T04:41:25.517Z',
    NULL,
    NULL
  ),
  (
    2,
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    'cena',
    '2025-02-22T00:44:12.419Z',
    '2025-03-07T20:33:10.308Z',
    '2025-05-09T22:17:43.537Z',
    6813021073737552,
    TRUE,
    '2025-02-25T19:43:13.723Z',
    '2025-11-02T08:59:24.829Z',
    '2025-09-26T14:45:04.691Z',
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    '2025-09-23T11:55:04.593Z',
    '2025-03-13T12:22:42.530Z',
    '2025-01-24T21:26:36.642Z',
    '2025-06-11T02:25:18.516Z'
  ),
  (
    3,
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    'depraedor',
    '2025-12-16T08:47:20.339Z',
    '2025-09-02T12:12:56.599Z',
    '2025-01-16T02:08:58.590Z',
    3628398107918286,
    FALSE,
    '2025-06-08T19:13:15.884Z',
    '2025-11-05T05:23:15.319Z',
    '2025-01-16T16:14:17.380Z',
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    '2025-05-11T21:41:30.980Z',
    '2025-11-23T23:13:02.728Z',
    '2025-02-05T17:26:52.187Z',
    '2025-03-24T15:25:47.343Z'
  ),
  (
    4,
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    'aperio',
    '2025-11-25T10:11:37.149Z',
    '2025-01-30T14:44:06.736Z',
    '2025-11-21T23:25:48.249Z',
    8169003887511341,
    FALSE,
    '2025-08-04T20:40:03.951Z',
    '2025-06-01T13:34:48.691Z',
    '2025-10-07T00:10:36.958Z',
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    '2025-11-05T05:57:34.887Z',
    '2025-05-26T06:02:36.422Z',
    '2025-01-16T04:05:52.824Z',
    '2025-02-08T15:55:45.826Z'
  ),
  (
    5,
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    'viriliter',
    '2025-02-20T01:25:09.548Z',
    '2025-05-14T20:44:39.597Z',
    '2025-02-10T11:25:59.974Z',
    6106437696508605,
    TRUE,
    '2025-10-24T04:40:20.630Z',
    '2025-03-18T14:34:56.100Z',
    '2025-03-17T06:51:02.139Z',
    '$2b$10$M/WlJFeICXSTwvlM54X75u9Tg5Y3w/ak5T7O96cYY7mW0vJ2NFA7m',
    '2025-11-28T19:47:49.876Z',
    '2025-02-13T18:21:07.409Z',
    '2025-10-06T00:12:56.753Z',
    '2025-09-11T16:09:50.840Z'
  );